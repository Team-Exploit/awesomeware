import sys
import argparse

from encrypt import my_encrypt
from decrypt import my_decrypt

def main():
    parser = argparse.ArgumentParser(
        prog="encrypt.py",
        description="Peform encryption/decryption operations")
    ## args.input
    parser.add_argument(
        'input',
        type=str,
        help='Input file')
    ## args.decrypt
    parser.add_argument(
        '-d', '--decrypt',
        action='store_true',
        help="Set the program in decryption mode")
    ## args.output
    parser.add_argument(
        '-o', '--out', '--output',
        type=str,
        action='store',
        metavar="output_file",
        default="output",
        dest="output",
        help="Spectify the name of the output file")
    ## args.json
    parser.add_argument(
        '-j', '--json',
        type=str,
        action='store',
        metavar="json_file",
        default="data.json",
        help="Specify the json file to read/write encryption data")
    ## args.folder
    parser.add_argument(
        '-F', '--folder',
        action='store_true',
        help="Specify that the target is a folder")
    args = parser.parse_args(sys.argv[1:])
    if args.decrypt:
        my_decrypt(args.input, args.output, args.json, args.folder)
    else:
        my_encrypt(args.input, args.output, args.json, args.folder)

if __name__ == "__main__":
    main()
